import{S as w,i as d,a as g}from"./assets/vendor-ee72e1a4.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=n(t);fetch(t.href,e)}})();function f(a,s){if(a.length===0)iziToast.error({title:"Error",message:"Sorry, there are no images matching your search query. Please try again!"});else{const n=a.map(r=>{const t=document.createElement("div");t.className="card";const e=document.createElement("img");e.src=r.webformatURL,e.alt=r.tags;const o=document.createElement("a");o.href=r.largeImageURL,o.className="simplelightbox",o.appendChild(e),e.dataset.largeImage=r.largeImageURL,e.dataset.likes=r.likes,e.dataset.views=r.views,e.dataset.comments=r.comments,e.dataset.downloads=r.downloads,e.classList.add("simplelightbox"),t.appendChild(o);const h=document.createElement("div");return h.className="info",h.innerHTML=`
          <p>Likes: ${r.likes}</p>
          <p>Views: ${r.views}</p>
          <p>Comments: ${r.comments}</p>
          <p>Downloads: ${r.downloads}</p>
        `,t.appendChild(h),t});s.append(...n)}}const E=document.getElementById("search-form"),y=document.getElementById("search-input"),l=document.querySelector(".loader"),m=document.getElementById("gallery"),p=document.getElementById("load-more-btn");let i=1,c="",b=new w(".simplelightbox a",{elements:".simplelightbox",closeText:"Закрыть",docClose:!0}),u=[];E.addEventListener("submit",async a=>{if(a.preventDefault(),c=y.value.trim(),i=1,l.style.display="block",p.style.display="none",m.innerHTML="",c==="")d.warning({title:"Warning",message:"Please enter a search term."}),l.style.display="none";else try{const s=await g.get(`https://pixabay.com/api/?key=43839854-7e39202c3c35776610ceb4193&q=${c}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${i}`);u=s.data.hits.map(n=>n.largeImageURL),f(s.data.hits,m),b.refresh(),s.data.totalHits>15&&(p.style.display="block")}catch{d.error({title:"Error",message:"An error occurred while fetching images. Please try again."})}finally{l.style.display="none",y.value=""}});p.addEventListener("click",async()=>{i++,l.style.display="block";try{const a=await g.get(`https://pixabay.com/api/?key=43839854-7e39202c3c35776610ceb4193&q=${c}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${i}`);u=[...u,...a.data.hits.map(n=>n.largeImageURL)],f(a.data.hits,m);const s=m.firstElementChild.getBoundingClientRect().height;window.scrollBy({top:s*2,behavior:"smooth"}),b.refresh(),i*15>=a.data.totalHits&&(p.style.display="none",d.info({title:"Info",message:"We're sorry, but you've reached the end of search results."}))}catch{d.error({title:"Error",message:"An error occurred while fetching images. Please try again."})}finally{l.style.display="none"}});
//# sourceMappingURL=commonHelpers.js.map
